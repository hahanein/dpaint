<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/webp;base64,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" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>untitled - Paint</title>
    <script type="module">
//assets/index.e568224d.js
const nt=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}};nt();const H=document.createElement("template");H.innerHTML=`
<style>
button {
    width: 1.5rem;
    height: 1.5rem;
}
</style>
<button></button>
`;class P extends HTMLElement{#e;constructor(){super();const n=this.attachShadow({mode:"closed"});n.appendChild(H.content.cloneNode(!0)),this.#e=n.querySelector("button")}static get observedAttributes(){return["value"]}attributeChangedCallback(n,e,s){n=="value"&&(this.#e.style.background="#"+s)}}window.customElements.define("p-color",P);const U=document.createElement("template");U.innerHTML=`
<style>
:host {
    display: flex;
}

#current {
  position: relative;
  width: 4rem;
  height: 4rem;
}

#primary {
  position: absolute;
  top: .5rem;
  left: .5rem;
}

#secondary {
  position: absolute;
  top: 1.5rem;
  left: 1.5rem;
}

#available {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
}
</style>
<div id="current">
    <p-color id="secondary" value="FFFFFF"></p-color>
    <p-color id="primary" value="000000"></p-color>
</div>
<div id="available">
    <slot></slot>
</div>
`;class B extends HTMLElement{#e;#t;constructor(){super();const n=this.attachShadow({mode:"closed"});n.appendChild(U.content.cloneNode(!0)),this.#e=n.querySelector("#primary"),this.#t=n.querySelector("#secondary")}static get observedAttributes(){return["primary","secondary"]}attributeChangedCallback(n,e,s){switch(n){case"primary":this.#e.setAttribute("value",s);break;case"secondary":this.#t.setAttribute("value",s);break}}}window.customElements.define("p-colors",B);const R=document.createElement("template");R.innerHTML=`
<style>
:host {
    position: absolute;
}

textarea {
    box-sizing: border-box;
    border: none;
    resize: none;
    outline: none;
    width: 100%;
    height: 100%;
}
</style>
<textarea></textarea>
`;function ot(t,n){const e=document.createElement("span");e.style.font=n,e.textContent="A",t.parentElement?.appendChild(e);const s=e.clientHeight;return e.remove(),s}function st(t,n,e,s){let o=s;const i=n.split(`
`).map(c=>c.split(" "));for(let c of i){let r="";for(let l of c){const a=r+l+" ";if(t.measureText(a).width<e){r=a;continue}t.fillText(r,0,o),r=l+" ",o+=s}t.fillText(r,0,o),o+=s}}class K extends HTMLElement{#e;#t;#n;value;#o="1.2rem Helvetica, Arial, Verdana sans-serif";#s="black";#i="white";constructor(){super();this.#e=this.attachShadow({mode:"closed"}),this.#e.appendChild(R.content.cloneNode(!0)),this.#t=this.#e.querySelector("textarea"),this.#t.style.font=this.#o,this.#t.style.color=this.#s,this.#t.style.background=this.#i,this.#n=document.createElement("canvas")}static get observedAttributes(){return["color","background"]}attributeChangedCallback(n,e,s){switch(n){case"color":this.#s=s,this.#t.style.color=s;break;case"background":this.#i=s,this.#t.style.background=s;break}}connectedCallback(){this.#t.focus();const n=this.#t.offsetWidth,e=this.#t.offsetHeight;this.#n.style.width=n+"px",this.#n.style.height=e+"px",this.#n.width=n,this.#n.height=e,this.#t.addEventListener("keyup",s=>{const o=ot(this,this.#o),i=this.#n.getContext("2d");i.fillStyle=this.#i,i.fillRect(0,0,n,e),i.fillStyle=this.#s,i.font=this.#o,st(i,this.#t.value,n,o),this.value=i.getImageData(0,0,n,e)})}}window.customElements.define("p-text",K);function W(t,n,e,s,o){const i=Math.sin(o),c=Math.cos(o);e-=t,s-=n;const r=e*c-s*i,l=e*i+s*c;return e=r+t,s=l+n,[e,s]}function it(t,n,e,s,o){const i=Math.sqrt((e-t)**2+(s-n)**2);return Number.isNaN(i)||i<o?[NaN,NaN]:(t=e-o*(e-t)/i,n=s-o*(s-n)/i,[t,n])}function V(t,n){return function(s,o,i){const c=n(o,i);if(c){const r=~(c>>24)&255,l=~(c>>16)&255,a=~(c>>8)&255,d=c&255,p=r*Math.pow(2,24)+l*Math.pow(2,16)+a*Math.pow(2,8)+d;t(p,o,i)}}}function rt(t,n,e,s,o,i,c=12,r=500){if([e,s]=it(e,s,o,i,c),e&&s){const[l,a]=W(e,s,o,i,r),[d,p]=W(e,s,o,i,-r);C(t,n,Math.floor(l),Math.floor(a),o,i),C(t,n,Math.floor(d),Math.floor(p),o,i)}}function X(t,n=8){const e=n*2;let s=0;return function(i,c,r){s<n&&t(i,c,r),s=(s+1)%e}}function ct(t,n,e,s,o){const i=n(s,o);if(i&&i!==e){const c=[[s,o]];for(let r=c.pop();r;r=c.pop())[s,o]=r,n(s,o)===i&&(t(e,s,o),c.push([s,o+1],[s,o-1],[s+1,o],[s-1,o]))}}function S(t,n){if(n===1)return t;if(n>1)return function(s,o,i){for(let c=0;c<n;c++)for(let r=0;r<n;r++)t(s,o+c,i+r)};throw new Error("Size must be greater than or equal 1")}function C(t,n,e,s,o,i){const c=Math.abs(o-e),r=e<o?1:-1,l=-Math.abs(i-s),a=s<i?1:-1;let d=c+l;for(;t(n,e,s),!(e==o&&s==i);){const p=2*d;p>=l&&(d+=l,e+=r),p<=c&&(d+=c,s+=a)}}function N(t,n,e,s,o,i){const c=Math.abs(e-o),r=Math.abs(s-i),l=e<o?e:o,a=s<i?s:i;for(let d=0;d<c;d++)for(let p=0;p<r;p++)t(n,l+d,a+p)}function z(t,n,e,s,o,i){const c=e<o?1:-1,r=s<i?1:-1;let l=e,a=s;for(;t(n,l,s),t(n,l,i),l!==o;)l+=c;for(;t(n,e,a),t(n,o,a),a!==i;)a+=r}let G=2;const w={get sizes(){return[1,2,3,5]},get currentSize(){return G},set currentSize(t){if(w.sizes.some(n=>n===t))G=t;else throw new Error("Custom sizes not allowed")}};function k(){let t;return[s=>{window.cancelAnimationFrame(t),t=window.requestAnimationFrame(function o(i){s(i),t=window.requestAnimationFrame(o)})},()=>{window.cancelAnimationFrame(t)}]}function at({buffer:t,colors:n,target:e}){let s,o;const[i,c]=k(),r=a=>{t.unstash();let d=S(t.plot,w.currentSize);C(d,e.main?n.primary:n.secondary,s,o,e.x,e.y),rt(d,e.main?n.primary:n.secondary,s,o,e.x,e.y),t.commit()};return Object.freeze({begin(){c(),t.stash(),S(t.plot,w.currentSize)(e.main?n.primary:n.secondary,e.x,e.y),s=e.x,o=e.y,t.commit(),i(r)},close(){c(),t.snapshot()},get modifiers(){return w.sizes.map(a=>({name:`${a}px`,isActive:a===w.currentSize,set(){w.currentSize=a}}))}})}function lt({buffer:t,colors:n,target:e}){let s,o;const[i,c]=k(),r=a=>{C(t.plot,e.secondary?n.secondary:n.primary,s,o,e.x,e.y),s=e.x,o=e.y,t.commit()};return Object.freeze({begin(){c(),t.plot(e.secondary?n.secondary:n.primary,e.x,e.y),s=e.x,o=e.y,t.commit(),i(r)},close(){c(),t.snapshot()}})}const T=1<<0,O=1<<1,dt=[{name:"outline",flags:T},{name:"full",flags:T|O},{name:"fill",flags:O}];let v=T;function mt({buffer:t,colors:n,target:e}){let s,o;const[i,c]=k(),r=a=>{if(t.unstash(),(O&v)>0&&N(t.plot,e.main?n.secondary:n.primary,s,o,e.x,e.y),(T&v)>0){let d=S(t.plot,w.currentSize);z(d,e.main?n.primary:n.secondary,s,o,e.x,e.y)}t.commit()};return Object.freeze({begin(){c(),t.stash(),(O&v)>0&&t.plot(e.main?n.secondary:n.primary,e.x,e.y),(T&v)>0&&S(t.plot,w.currentSize)(e.main?n.primary:n.secondary,e.x,e.y),s=e.x,o=e.y,t.commit(),i(r)},close(){c(),t.snapshot()},get modifiers(){return dt.map(({name:a,flags:d})=>({name:a,isActive:d===v,set(){v=d}}))}})}const J=[2,3,5,7,9,11,13,15,17,19,21];let E=J[0];document.addEventListener("wheel",({deltaY:t})=>{const n=Math.floor(E+t*.01);n>=2&&(E=n)});function pt({buffer:t,colors:n,target:e}){let s,o;const[i,c]=k(),r=a=>{let d=S(t.plot,E);C(d,e.main?n.primary:n.secondary,s,o,e.x,e.y),s=e.x,o=e.y,t.commit()};return Object.freeze({begin(){c(),S(t.plot,E)(e.main?n.primary:n.secondary,e.x,e.y),s=e.x,o=e.y,t.commit(),i(r)},close(){c(),t.snapshot()},get modifiers(){return J.map(a=>({name:`${a}px`,isActive:a===E,set(){E=a}}))}})}function ut({buffer:t,colors:n,target:e}){return Object.freeze({begin(){},close(){const o=t.pick(e.x,e.y);o&&e.main&&(n.primary=o),o&&e.secondary&&(n.secondary=o)}})}function ht({buffer:t,colors:n,target:e}){return Object.freeze({begin(){},close(){ct(t.plot,t.pick,e.main?n.primary:n.secondary,e.x,e.y),t.commit(),t.snapshot()}})}function yt({buffer:t,colors:n,target:e}){let s="select",o,i;const c=V(X(t.plot),t.pick),[r,l]=k(),a=p=>{t.unstash(),z(c,n.primary,o,i,e.x,e.y),t.commit()};return Object.freeze({begin(){s==="select"&&(l(),t.stash(),c(0,e.x,e.y),t.commit(),r(a)),o=e.x,i=e.y},close(){if(s==="select"){l(),s="edit",t.unstash();const{x:p,y:m,offsetLeft:u,offsetTop:g}=e,y=o<p?o:p,A=i<m?i:m,b=Math.abs(o-p),x=Math.abs(i-m);o=p,i=m,z(c,n.primary,y-1,A,y+b,A+x+1);const h=new K;h.style.left=`${y+u}px`,h.style.top=`${A+g}px`,h.style.width=`${b}px`,h.style.height=`${x}px`;const tt=e.main?n.primaryString:n.secondaryString,et=e.main?n.secondaryString:n.primaryString;h.setAttribute("color",`#${tt.substring(0,6)}`),h.setAttribute("background",`#${et}`),document.body.appendChild(h),t.commit(),h.addEventListener("focusout",Et=>{t.unstash(),h.remove(),h.value&&t.putImageData(h.value,y,A),t.commit(),t.snapshot(),s="done"})}else s==="done"&&(s="select")}})}function ft({buffer:t,colors:n,target:e}){let s="select",o,i,c,r,l;const[a,d]=k(),p=V(X(t.plot),t.pick),m=b=>{t.unstash(),z(p,n.primary,c,r,e.x,e.y),t.commit()},u=b=>{t.unstash(),N(t.plot,n.secondary,o.x,o.y,o.x+o.dx-1,o.y+o.dy-1),z(p,n.primary,i.x-1,i.y-1,i.x+i.dx,i.y+i.dy),t.putImageData(l,i.x,i.y),t.commit()},g=b=>{const x=c-e.x,h=r-e.y;c=e.x,r=e.y,i={x:i.x-x,y:i.y-h,dx:o.dx,dy:o.dy},u()},y=()=>i.x<e.x&&e.x<i.dx+i.x&&i.y<e.y&&e.y<i.dy+i.y;return Object.freeze({begin(){if(!(e.x<0||e.y<0)){switch(s){case"select":t.stash(),a(m);break;case"edit":y()?a(g):(d(),s="done",t.unstash(),N(t.plot,n.secondary,o.x,o.y,o.x+o.dx-1,o.y+o.dy-1),t.putImageData(l,i.x,i.y),t.commit());break}c=e.x,r=e.y}},close(){if(!(e.x<0||e.y<0))switch(s){case"select":s="edit";const{x:b,y:x}=e;o={x:c<b?c:b,y:r<x?r:x,dx:Math.abs(c-b),dy:Math.abs(r-x)},i={...o},t.unstash(),l=t.getImageData(o.x,o.y,o.dx,o.dy),a(u);break;case"edit":a(u);break;case"done":s="select";break}}})}function bt({buffer:t,target:n}){let e=2;return Object.freeze({begin(){n.zoom(e),t.commit()},close(){},get modifiers(){return[1,2,6,8].map(o=>({name:`${o}X`,isActive:e===o,set(){e=o}}))}})}var xt={createLine:at,createPencil:lt,createBrush:pt,createRectangle:mt,createPicker:ut,createBucket:ht,createText:yt,createSelect:ft,createMagnifier:bt};let I=255,_=4294967295;const D=new Set;function Q(){for(const t of D)t()}function Y(t){if(typeof t=="number")return t;if(typeof t=="string")return Number.parseInt(t,16);throw new Error("Not implemented")}const f={get colors(){return[255,4294967295,2155905279,3233857791,2147483903,4278190335,2155872511,4294902015,8388863,16711935,8421631,16777215,33023,65535,2147516671,4278255615,2155888895,4294934783,4210943,16744703,8454143,2164260863,4227327,2155937791,2147549183,4278223103,2151678207,4286595327]},get colorStrings(){return f.colors.map(t=>t.toString(16).padStart(8,"0"))},get primary(){return I},get secondary(){return _},get primaryString(){return I.toString(16).padStart(8,"0")},get secondaryString(){return _.toString(16).padStart(8,"0")},set primary(t){I=Y(t),Q()},set secondary(t){_=Y(t),Q()},subscribe(t){return D.add(t),D.delete.bind(D,t)}};function wt(t){for(let n=0;n<t.length;n++)t[n]=255}function gt({width:t,height:n}){const e=new Set,s=new Uint8ClampedArray(t*n*4);wt(s);const o=new Uint8ClampedArray(s),i=[new Uint8ClampedArray(s)],c=[];return Object.freeze({subscribe(r){return e.add(r),e.delete.bind(e,r)},plot(r,l,a){if(0>l||l>=t||0>a||a>=n)return;let d=l*4+a*t*4;s[d]=r>>24&255,s[++d]=r>>16&255,s[++d]=r>>8&255,s[++d]=r&255},pick(r,l){if(0>r||r>=t||0>l||l>=n)return;let a=r*4+l*t*4;return s[a]*Math.pow(2,24)+s[++a]*Math.pow(2,16)+s[++a]*Math.pow(2,8)+s[++a]},commit(){for(const r of e)r()},stash(){o.set(s)},unstash(){s.set(o)},snapshot(){c.length=0,i.push(new Uint8ClampedArray(s)),i.splice(0,i.length-50)},undo(){const r=i.pop();r&&(c.push(r),s.set(r))},redo(){const r=c.pop();r&&(i.push(r),s.set(r))},get imageData(){return new ImageData(s,t,n)},getImageData(r,l,a,d){const p=new Uint8ClampedArray(a*d*4);for(let m=0;m<d;m++){const u=r*4+(l+m)*t*4,g=(r+a)*4+(l+m)*t*4,y=m*a*4;p.set(s.slice(u,g),y)}return new ImageData(p,a,d)},putImageData(r,l,a){const d=l*4,p=a*t*4,m=r.width*4;for(let u=0;u<r.data.length;u++){const g=u%m,y=Math.floor(u/m)*t*4;s[d+p+g+y]=r.data[u]}}})}function St({canvas:t,buffer:n}){const e=t.getContext("2d");e.imageSmoothingEnabled=!1;const s=t.width,o=t.height;let i=1;n.subscribe(()=>e.putImageData(n.imageData,0,0));let c,r,l,a,d;const p=m=>{r=m.button===0,l=m.button===2};return document.addEventListener("mousemove",({clientX:m,clientY:u})=>{a=m-t.offsetLeft,d=u-t.offsetTop}),document.addEventListener("mousedown",m=>{p(m),c.begin()}),document.addEventListener("mouseup",m=>{p(m),c.close()}),document.addEventListener("contextmenu",m=>m.preventDefault()),{get offsetLeft(){return t.offsetLeft},get offsetTop(){return t.offsetTop},get x(){return Math.floor(a/i)},get y(){return Math.floor(d/i)},get main(){return r},get secondary(){return l},set tool(m){c=m},zoom(m){i=m,t.width=s/i,t.height=o/i}}}const q=1024,$=720,M=document.querySelector("canvas");M.style.width=q+"px";M.style.height=$+"px";M.width=q;M.height=$;const j=gt({width:q,height:$}),Z=St({canvas:M,buffer:j}),kt={buffer:j,colors:f,target:Z},vt=document.getElementById("toolbox"),F=document.getElementById("toolbox-modifiers");for(const[t,n]of Object.entries(xt)){const e=t.substr("create".length),s=document.createElement("button");s.innerText=e;const o=()=>{const i=n(kt);for(Z.tool=i;F.firstChild;)F.removeChild(F.firstChild);if(i.modifiers)for(const c of i.modifiers){const r=document.createElement("button");r.innerText=c.name,r.addEventListener("click",c.set),F.appendChild(r)}};s.addEventListener("click",o),e==="Pencil"&&o(),vt.appendChild(s)}const L=new B;L.setAttribute("primary",f.primaryString);L.setAttribute("secondary",f.secondaryString);for(const t of f.colorStrings){const n=new P;n.setAttribute("value",t),n.addEventListener("click",e=>f.primary=n.getAttribute("value")),n.addEventListener("contextmenu",e=>{e.preventDefault(),f.secondary=n.getAttribute("value")}),L.appendChild(n)}f.subscribe(()=>{L.setAttribute("primary",f.primaryString),L.setAttribute("secondary",f.secondaryString)});document.querySelector("footer").appendChild(L);document.addEventListener("keydown",function(n){n.ctrlKey&&n.key==="z"&&(j.undo(),j.commit()),n.ctrlKey&&n.key==="r"&&(n.preventDefault(),j.redo(),j.commit()),n.ctrlKey&&n.key==="s"&&(n.preventDefault(),M.toBlob(function(s){const o=document.createElement("a");o.href=window.URL.createObjectURL(s),o.download="Untitled.bmp",o.click()},"image/bmp"))});

</script>
    <!-- assets/style.fa1327f1.css --><style type="text/css">
body,html{margin:0;padding:0;width:100%;height:100%;overflow:hidden;background:lightgray}body{display:grid;grid-template-columns:6em 1fr;grid-template-rows:2em 1fr 5em;grid-template-areas:"header header" "sidebar main" "footer footer"}header{grid-area:header;font-family:system-ui;position:relative}#main{width:100%;height:100%;grid-area:main;padding:.2rem;background:gray;box-sizing:border-box;border:1px solid dimgray;border-right-color:#fff;border-bottom-color:#fff}canvas{background:white;pointer-events:none;image-rendering:pixelated}#sidebar{grid-area:sidebar;display:flex;flex-direction:column;padding:2px}#toolbox{display:flex;flex-direction:column}footer{grid-area:footer;display:flex}#title{user-select:none;font-size:1.5rem;position:absolute;top:50%;transform:translateY(-50%);left:.5rem}

</style>
  </head>
  <body>
    <header><div id="title"><small>ðorðe</small><b>PAINT</b></div></header>
    <div id="sidebar">
      <div id="toolbox"></div>
      <div id="toolbox-modifiers"></div>
    </div>
    <div id="main">
      <canvas></canvas>
    </div>
    <footer></footer>
    
  </body>
</html>
